---
title: "wastemanagement"
description: |
  Hier gibt es Hintergrundinformationen zur Entstehung dieser Website.
site: distill::distill_website
---
  
```{r setup, include=FALSE}


library(tidyverse)
library(dbplyr)
library(ggplot2)
library(plotly)
library(tidyr)
library(plyr)
library(ggiraph)
library(cowplot)

#Legende muss noch erg채nzt werden 
#Hier wird gezeigt wie viele Tonnen Plastik j채hrlich in Deutschland recycelt, auf M체lldeponien gelagert und energetisch verwertet werden (von 2010-2018)

waste_mgmt <- readr::read_csv("data/waste_management.csv")


ggplot()+
  geom_line(data= waste_mgmt, mapping = aes(x = Year, y= Recycling, tooltip=Recycling), colour= "#66CC66", size=1, alpha=0.6)+
  geom_point_interactive(data= waste_mgmt, mapping = aes(x = Year, y= Recycling, data_id=Recycling, tooltip=Recycling), colour="#66CC66", size=4)+
  geom_line(data= waste_mgmt, mapping = aes(x= Year, y= Engery_recovery), color="#33CCCC", size= 1, alpha=0.6)+
  geom_point_interactive(data= waste_mgmt, mapping = aes(x= Year, y= Engery_recovery, data_id=Engery_recovery, tooltip=Engery_recovery), color= "#33CCCC", size=4)+
  geom_line(data= waste_mgmt, mapping = aes(x= Year, y= Disposal_total), color= "#6699FF", lwd=1, alpha=0.6)+
  geom_point_interactive(data= waste_mgmt, mapping = aes(x= Year, y= Disposal_total, data_id=Disposal_total, tooltip=Disposal_total), color= "#6699FF", size=4)+
  labs(x= "Jahr", y= "Tonnen", title= "Wohin mit dem ganzen Plastikabfall? \n Neben der Produktion ist auch die Entsorgung von \n bereits bestehendem Plastik ein Problem", subtitle = "Management des Plastikabfalls in Deutschland von 2010 bis 2018")+
  scale_x_continuous(limits=c(2010,2018), breaks = c(2010,2012,2014,2016,2018))+
  theme_minimal_hgrid()->waste_plot

girafe(
  ggobj = waste_plot,
  width_svg = 7,
  height_svg = 7*0.618,
    options = list(
    opts_tooltip(css = "background: #F5F5F5; color: #000000;"),
    opts_hover(css = "background: #F5F5F5; color: #000000;"),
    opts_hover_inv(css = "opacity: 0.2;")))



```

```{r}
#Versuch mit Plotly 

ggplot()+
  geom_line(data= waste_mgmt, mapping = aes(x = Year, y= Recycling), colour= "#66CC66", size=1, alpha=0.6)+
  geom_point(data= waste_mgmt, mapping = aes(x = Year, y= Recycling), colour="#66CC66", size=4)+
  geom_line(data= waste_mgmt, mapping = aes(x= Year, y= Engery_recovery), color="#33CCCC", size= 1, alpha=0.6)+
  geom_point(data= waste_mgmt, mapping = aes(x= Year, y= Engery_recovery), color= "#33CCCC", size=4)+
  geom_line(data= waste_mgmt, mapping = aes(x= Year, y= Disposal_total), color= "#6699FF", lwd=1, alpha=0.6)+
  geom_point(data= waste_mgmt, mapping = aes(x= Year, y= Disposal_total), color= "#6699FF", size=4)+
  labs(x= "Jahr", y= "Tonnen", title= "Wohin mit dem ganzen Plastikabfall? \n Neben der Produktion ist auch die Entsorgung von \n bereits bestehendem Plastik ein Problem", subtitle = "Management des Plastikabfalls in Deutschland von 2010 bis 2018")+
  scale_x_continuous(limits=c(2010,2018), breaks = c(2010,2012,2014,2016,2018))+
  theme_minimal_hgrid() ->waste_plot


fig<-ggplotly(waste_plot)

fig%>% 
  add_trace(y = ~Recycling, name = 'Recycling') ->fig

  
fig 
```

```{r}
# Entwicklung Welt 

global_plastic_fate <- readr::read_csv("data/global-plastic-fate.csv")


global_plastic_fate %>%
group_by(Entity)%>%
ggplot(aes(y=`Estimated historic plastic fate`, fill= Entity, position= "dodge")) +
 geom_bar()+
 scale_x_continuous(limits = c(1980, 2015), breaks = c(1980, 1990, 2000, 2010, 2015), expand = c(0.02,0.02))+
  scale_y_continuous(limits = c(0, 100), breaks = c(20, 40, 60, 80, 100))+
  labs(x= "", y= "prozentualer Anteil", title= "Globaler Kunststoffabfall differnziert nach Entsorgungsart, 1980 bis 2015")+
  scale_colour_discrete(name= "Entsorgungsart", breaks=c("Discarded", "Incinerated", "Recycled"),labels= c("Entsorgung (auf M체lldeponien)", "Verbrennung", "Recyceln"))+
  theme_minimal_hgrid(12)
```

